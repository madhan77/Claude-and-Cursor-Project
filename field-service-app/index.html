<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FieldService Pro - Premium Field Service Management</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body>
    <!-- Global Search Overlay -->
    <div id="globalSearchOverlay" class="search-overlay">
        <div class="search-container">
            <div class="search-header">
                <i class="fas fa-search"></i>
                <input type="text" id="globalSearchInput" placeholder="Search appointments, clients, work orders..." autofocus>
                <button onclick="closeGlobalSearch()" class="search-close"><i class="fas fa-times"></i></button>
            </div>
            <div id="globalSearchResults" class="search-results">
                <!-- Results populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notificationsPanel" class="notifications-panel">
        <div class="notifications-header">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <button onclick="closeNotifications()" class="close-btn-small">&times;</button>
        </div>
        <div id="notificationsList" class="notifications-list">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-tools"></i>
                <span class="brand-name">FieldService</span>
                <span class="brand-tag">PRO</span>
            </div>

            <!-- Centered Search Bar -->
            <div class="nav-search-center">
                <div class="search-input-wrapper" onclick="openGlobalSearch()">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search appointments, clients, work orders..." readonly>
                    <kbd>‚åòK</kbd>
                </div>
            </div>

            <div class="nav-actions">
                <button class="icon-btn" onclick="toggleVoiceControl()" title="Voice Control">
                    <i class="fas fa-microphone"></i>
                </button>
                <button class="icon-btn" onclick="toggleNotifications()" title="Notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-dot">7</span>
                </button>
                <div class="user-menu" onclick="toggleUserMenu()">
                    <div class="user-avatar">JD</div>
                    <span>John Doe</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Navigation Menu -->
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-link active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="sidebar-link" data-page="appointments">
                    <i class="fas fa-calendar-check"></i>
                    <span>Appointments</span>
                </a>
                <a href="#" class="sidebar-link" data-page="work-orders">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Work Orders</span>
                </a>
                <a href="#" class="sidebar-link" data-page="clients">
                    <i class="fas fa-building"></i>
                    <span>Clients</span>
                </a>
                <a href="#" class="sidebar-link" data-page="team">
                    <i class="fas fa-users"></i>
                    <span>Team</span>
                </a>
                <a href="#" class="sidebar-link" data-page="calendar">
                    <i class="fas fa-calendar"></i>
                    <span>Calendar</span>
                </a>
                <a href="#" class="sidebar-link" data-page="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </a>
                <a href="#" class="sidebar-link" data-page="inventory">
                    <i class="fas fa-boxes"></i>
                    <span>Inventory</span>
                </a>
            </nav>

            <!-- Quick Actions -->
            <div class="sidebar-section">
                <button class="btn-quick-action primary" onclick="openModal('newAppointmentModal')">
                    <i class="fas fa-plus"></i>
                    <span>New Appointment</span>
                </button>
                <button class="btn-quick-action secondary" onclick="openModal('newWorkOrderModal')">
                    <i class="fas fa-file-plus"></i>
                    <span>New Work Order</span>
                </button>
            </div>

            <!-- Time Tracking -->
            <div class="sidebar-section">
                <div class="time-tracking-compact">
                    <div id="activeTimeTracking" class="time-tracker-compact">
                        <div class="tracker-label">Not clocked in</div>
                        <button class="btn-clock-in" onclick="clockIn()">
                            <i class="fas fa-play"></i> Clock In
                        </button>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="sidebar-section">
                <h3 class="sidebar-section-title">
                    <i class="fas fa-filter"></i> Filters
                </h3>
                <div class="filter-group">
                    <label class="filter-label">Status</label>
                    <select id="statusFilter" onchange="filterAppointments()" class="filter-select">
                        <option value="all">All Status</option>
                        <option value="scheduled">Scheduled</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Priority</label>
                    <select id="priorityFilter" onchange="filterAppointments()" class="filter-select">
                        <option value="all">All Priorities</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                <button class="btn-filter-clear" onclick="clearFilters()">
                    <i class="fas fa-times"></i> Clear Filters
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="page-header">
                    <div class="page-title-section">
                        <h1 class="page-title">Dashboard</h1>
                        <p class="page-subtitle">Welcome back, John! Here's what's happening today.</p>
                    </div>
                    <div class="header-actions">
                        <div class="date-selector-enhanced">
                            <i class="fas fa-calendar"></i>
                            <input type="date" id="dateFilter" value="2025-11-22" class="modern-date-input">
                        </div>
                        <button class="btn btn-outline" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Enhanced Stats Cards -->
                <div class="stats-grid-enhanced">
                    <div class="stat-card-enhanced card-blue stat-card-interactive" onclick="navigateToPage('appointments')" title="Click to view all appointments">
                        <div class="stat-card-header">
                            <div class="stat-icon-large pulse-animation">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-trend-badge positive">
                                <i class="fas fa-arrow-up"></i> 12%
                            </div>
                        </div>
                        <div class="stat-card-body">
                            <h2 class="stat-value" data-target="24">0</h2>
                            <p class="stat-label">Total Appointments</p>
                            <div class="stat-footer">
                                <span class="stat-detail">vs last week</span>
                                <i class="fas fa-chevron-right stat-arrow"></i>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card-enhanced card-green stat-card-interactive" onclick="navigateToPage('work-orders')" title="Click to view work orders">
                        <div class="stat-card-header">
                            <div class="stat-icon-large pulse-animation">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-trend-badge positive">
                                <i class="fas fa-arrow-up"></i> 8%
                            </div>
                        </div>
                        <div class="stat-card-body">
                            <h2 class="stat-value" data-target="18">0</h2>
                            <p class="stat-label">Completed Jobs</p>
                            <div class="stat-footer">
                                <span class="stat-detail">75% completion rate</span>
                                <i class="fas fa-chevron-right stat-arrow"></i>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card-enhanced card-orange stat-card-interactive" onclick="navigateToPage('analytics')" title="Click to view revenue analytics">
                        <div class="stat-card-header">
                            <div class="stat-icon-large pulse-animation">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-trend-badge positive">
                                <i class="fas fa-arrow-up"></i> 24%
                            </div>
                        </div>
                        <div class="stat-card-body">
                            <h2 class="stat-value" data-target="18450">$0</h2>
                            <p class="stat-label">Revenue This Week</p>
                            <div class="stat-footer">
                                <span class="stat-detail">$2,640 avg per day</span>
                                <i class="fas fa-chevron-right stat-arrow"></i>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card-enhanced card-purple stat-card-interactive" onclick="navigateToPage('analytics')" title="Click to view customer feedback">
                        <div class="stat-card-header">
                            <div class="stat-icon-large pulse-animation">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-trend-badge positive">
                                <i class="fas fa-arrow-up"></i> 3%
                            </div>
                        </div>
                        <div class="stat-card-body">
                            <h2 class="stat-value" data-target="4.8">0</h2>
                            <p class="stat-label">Avg Customer Rating</p>
                            <div class="stat-footer">
                                <span class="stat-detail">Based on 156 reviews</span>
                                <i class="fas fa-chevron-right stat-arrow"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-card-large">
                        <div class="chart-card-header">
                            <div>
                                <h3>Appointments Overview</h3>
                                <p class="chart-subtitle">Daily appointments for the past 7 days</p>
                            </div>
                            <div class="chart-actions">
                                <button class="btn-icon"><i class="fas fa-download"></i></button>
                                <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="appointmentsChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card-medium">
                        <div class="chart-card-header">
                            <div>
                                <h3>Service Distribution</h3>
                                <p class="chart-subtitle">By service type</p>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="serviceTypesChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card-medium">
                        <div class="chart-card-header">
                            <div>
                                <h3>Team Performance</h3>
                                <p class="chart-subtitle">Jobs completed by technician</p>
                            </div>
                        </div>
                        <div class="chart-body">
                            <canvas id="teamPerformanceChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Technician Leaderboard -->
                <div class="leaderboard-section">
                    <div class="leaderboard-header">
                        <div>
                            <h2 class="section-title">
                                <i class="fas fa-trophy" style="color: #FFD700;"></i>
                                Technician Leaderboard
                            </h2>
                            <p class="section-subtitle">Top performers this week</p>
                        </div>
                        <button class="btn btn-outline" onclick="navigateToPage('team')">
                            View All <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    <div class="leaderboard-grid">
                        <div class="leaderboard-card rank-1">
                            <div class="rank-badge gold">
                                <i class="fas fa-crown"></i>
                                <span>1</span>
                            </div>
                            <div class="technician-info">
                                <div class="tech-avatar-large">JD</div>
                                <div class="tech-details">
                                    <h4>John Doe</h4>
                                    <p class="tech-role">Senior Technician</p>
                                </div>
                            </div>
                            <div class="leaderboard-stats">
                                <div class="leader-stat">
                                    <span class="stat-num">87</span>
                                    <span class="stat-label">Jobs</span>
                                </div>
                                <div class="leader-stat">
                                    <span class="stat-num">4.9</span>
                                    <span class="stat-label">Rating</span>
                                </div>
                                <div class="leader-stat">
                                    <span class="stat-num">1,240</span>
                                    <span class="stat-label">Points</span>
                                </div>
                            </div>
                            <div class="achievement-badges-row">
                                <span class="mini-badge" title="Perfect Week">üåü</span>
                                <span class="mini-badge" title="Speed Demon">‚ö°</span>
                                <span class="mini-badge" title="Customer Favorite">‚ù§Ô∏è</span>
                            </div>
                        </div>

                        <div class="leaderboard-card rank-2">
                            <div class="rank-badge silver">
                                <span>2</span>
                            </div>
                            <div class="technician-info">
                                <div class="tech-avatar-large">MS</div>
                                <div class="tech-details">
                                    <h4>Mike Smith</h4>
                                    <p class="tech-role">Lead Technician</p>
                                </div>
                            </div>
                            <div class="leaderboard-stats">
                                <div class="leader-stat">
                                    <span class="stat-num">76</span>
                                    <span class="stat-label">Jobs</span>
                                </div>
                                <div class="leader-stat">
                                    <span class="stat-num">4.8</span>
                                    <span class="stat-label">Rating</span>
                                </div>
                                <div class="leader-stat">
                                    <span class="stat-num">1,010</span>
                                    <span class="stat-label">Points</span>
                                </div>
                            </div>
                            <div class="achievement-badges-row">
                                <span class="mini-badge" title="Consistent Performer">üéØ</span>
                                <span class="mini-badge" title="Team Player">ü§ù</span>
                            </div>
                        </div>

                        <div class="leaderboard-card rank-3">
                            <div class="rank-badge bronze">
                                <span>3</span>
                            </div>
                            <div class="technician-info">
                                <div class="tech-avatar-large">SJ</div>
                                <div class="tech-details">
                                    <h4>Sarah Johnson</h4>
                                    <p class="tech-role">Technician</p>
                                </div>
                            </div>
                            <div class="leaderboard-stats">
                                <div class="leader-stat">
                                    <span class="stat-num">68</span>
                                    <span class="stat-label">Jobs</span>
                                </div>
                                <div class="leader-stat">
                                    <span class="stat-num">4.7</span>
                                    <span class="stat-label">Rating</span>
                                </div>
                                <div class="leader-stat">
                                    <span class="stat-num">890</span>
                                    <span class="stat-label">Points</span>
                                </div>
                            </div>
                            <div class="achievement-badges-row">
                                <span class="mini-badge" title="Rising Star">‚≠ê</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Appointments -->
                <div class="section-card">
                    <div class="section-header">
                        <div>
                            <h2 class="section-title">Today's Appointments</h2>
                            <p class="section-subtitle">Showing 8 appointments for November 22, 2025</p>
                        </div>
                        <div class="section-actions">
                            <button class="btn btn-outline btn-sm">
                                <i class="fas fa-download"></i> Export
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="openModal('newAppointmentModal')">
                                <i class="fas fa-plus"></i> Add New
                            </button>
                        </div>
                    </div>
                    <div id="appointmentsList" class="appointments-list-enhanced">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
            <div id="calendar-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">Calendar View</h1>
                    <div class="header-actions">
                        <button class="btn btn-outline" onclick="calendarToday()">
                            <i class="fas fa-calendar-day"></i> Today
                        </button>
                        <button class="btn btn-outline" onclick="calendarPrevMonth()">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="btn btn-outline" onclick="calendarNextMonth()">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div id="calendar" class="calendar-container">
                    <!-- Calendar will be rendered here -->
                </div>
            </div>

            <!-- Appointments Page -->
            <div id="appointments-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">All Appointments</h1>
                    <div class="header-actions">
                        <input type="text" placeholder="Search appointments..." class="search-input-large" id="searchInput">
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-primary" onclick="openModal('newAppointmentModal')">
                            <i class="fas fa-plus"></i> New Appointment
                        </button>
                    </div>
                </div>
                <div id="allAppointmentsList" class="appointments-list-enhanced">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Work Orders Page -->
            <div id="work-orders-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">Work Orders</h1>
                    <div class="header-actions">
                        <input type="text" placeholder="Search work orders..." class="search-input-large">
                        <button class="btn btn-primary" onclick="openModal('newWorkOrderModal')">
                            <i class="fas fa-plus"></i> New Work Order
                        </button>
                    </div>
                </div>
                <div id="workOrdersList" class="work-orders-list-enhanced">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">Analytics & Reports</h1>
                    <div class="header-actions">
                        <select class="modern-select">
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                            <option>Last 3 months</option>
                            <option>This year</option>
                        </select>
                        <button class="btn btn-primary">
                            <i class="fas fa-file-pdf"></i> Export Report
                        </button>
                    </div>
                </div>

                <div id="analyticsContent" class="analytics-grid">
                    <!-- Analytics content will be populated -->
                </div>
            </div>

            <!-- Clients Page -->
            <div id="clients-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">Clients</h1>
                    <div class="header-actions">
                        <input type="text" placeholder="Search clients..." class="search-input-large">
                        <button class="btn btn-outline">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-primary" onclick="openModal('newClient')">
                            <i class="fas fa-plus"></i> New Client
                        </button>
                    </div>
                </div>
                <div id="clientsList" class="clients-grid-enhanced">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Team Page -->
            <div id="team-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">Team Members</h1>
                    <div class="header-actions">
                        <input type="text" placeholder="Search team members..." class="search-input-large">
                        <button class="btn btn-primary" onclick="openModal('newTeamMember')">
                            <i class="fas fa-plus"></i> Add Team Member
                        </button>
                    </div>
                </div>
                <div id="teamList" class="team-grid-enhanced">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- Inventory Page -->
            <div id="inventory-page" class="page">
                <div class="page-header">
                    <h1 class="page-title">Parts & Inventory</h1>
                    <div class="header-actions">
                        <input type="text" placeholder="Search parts..." class="search-input-large">
                        <button class="btn btn-primary" onclick="openModal('newInventoryItem')">
                            <i class="fas fa-plus"></i> Add Item
                        </button>
                    </div>
                </div>
                <div id="inventoryList" class="inventory-grid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <!-- Enhanced Appointment Detail Modal -->
    <div id="appointmentDetailModal" class="modal-enhanced">
        <div class="modal-content-enhanced modal-xlarge">
            <div class="modal-header-enhanced">
                <div class="modal-title-section">
                    <h2><i class="fas fa-calendar-check"></i> Appointment Details</h2>
                    <span id="appointmentIdBadge" class="badge-large">APT001</span>
                </div>
                <button class="modal-close-btn" onclick="closeModal('appointmentDetailModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="appointmentDetailContent" class="modal-body-enhanced">
                <!-- Will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Work Order Details Modal -->
    <div id="workOrderDetailModal" class="modal-enhanced">
        <div class="modal-content-enhanced modal-xlarge">
            <div class="modal-header-enhanced">
                <div class="modal-title-section">
                    <h2><i class="fas fa-clipboard-list"></i> Work Order Details</h2>
                    <span id="workOrderIdBadge" class="badge-large">WO-001</span>
                </div>
                <button class="modal-close-btn" onclick="closeModal('workOrderDetailModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="workOrderDetailContent" class="modal-body-enhanced">
                <!-- Will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Time Tracking Modal -->
    <div id="timeTrackingModal" class="modal-enhanced">
        <div class="modal-content-enhanced">
            <div class="modal-header-enhanced">
                <h2><i class="fas fa-clock"></i> Time Tracking</h2>
                <button class="modal-close-btn" onclick="closeModal('timeTrackingModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body-enhanced">
                <div id="timeTrackingContent">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Photo Upload Modal -->
    <div id="photoUploadModal" class="modal-enhanced">
        <div class="modal-content-enhanced">
            <div class="modal-header-enhanced">
                <h2><i class="fas fa-camera"></i> Upload Photos</h2>
                <button class="modal-close-btn" onclick="closeModal('photoUploadModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body-enhanced">
                <div class="photo-upload-section">
                    <div class="upload-area" id="photoDropZone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Drag & Drop Photos Here</h3>
                        <p>or click to browse</p>
                        <input type="file" id="photoInput" accept="image/*" multiple hidden>
                        <button class="btn btn-primary" onclick="document.getElementById('photoInput').click()">
                            <i class="fas fa-folder-open"></i> Browse Files
                        </button>
                    </div>
                    <div id="photoPreviewGrid" class="photo-preview-grid">
                        <!-- Photo previews will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Digital Signature Modal -->
    <div id="signatureModal" class="modal-enhanced">
        <div class="modal-content-enhanced">
            <div class="modal-header-enhanced">
                <h2><i class="fas fa-signature"></i> Client Signature</h2>
                <button class="modal-close-btn" onclick="closeModal('signatureModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body-enhanced">
                <div class="signature-section">
                    <div class="signature-info">
                        <p><strong>Client Name:</strong> <span id="signatureClientName"></span></p>
                        <p><strong>Appointment:</strong> <span id="signatureAppointmentId"></span></p>
                    </div>
                    <div class="signature-pad-container">
                        <canvas id="signaturePad" class="signature-pad"></canvas>
                    </div>
                    <div class="signature-actions">
                        <button class="btn btn-outline" onclick="clearSignature()">
                            <i class="fas fa-eraser"></i> Clear
                        </button>
                        <button class="btn btn-primary" onclick="saveSignature()">
                            <i class="fas fa-save"></i> Save Signature
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div id="invoiceModal" class="modal-enhanced">
        <div class="modal-content-enhanced modal-xlarge">
            <div class="modal-header-enhanced">
                <h2><i class="fas fa-file-invoice-dollar"></i> Generate Invoice</h2>
                <button class="modal-close-btn" onclick="closeModal('invoiceModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body-enhanced">
                <div id="invoiceContent" class="invoice-container">
                    <!-- Invoice content will be populated -->
                </div>
                <div class="invoice-actions">
                    <button class="btn btn-outline" onclick="printInvoice()">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn btn-primary" onclick="downloadInvoice()">
                        <i class="fas fa-download"></i> Download PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- New Appointment Modal (Enhanced) -->
    <div id="newAppointmentModal" class="modal-enhanced">
        <div class="modal-content-enhanced modal-large">
            <div class="modal-header-enhanced">
                <h2><i class="fas fa-plus-circle"></i> New Appointment</h2>
                <button class="modal-close-btn" onclick="closeModal('newAppointmentModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body-enhanced">
                <form id="newAppointmentForm" class="modern-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fas fa-building"></i> Client *</label>
                            <select required class="modern-input">
                                <option value="">Select Client</option>
                                <option>Acme Corporation</option>
                                <option>TechStart Inc.</option>
                                <option>Global Solutions Ltd.</option>
                                <option>Healthcare Plus</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-wrench"></i> Service Type *</label>
                            <select required class="modern-input">
                                <option value="">Select Service Type</option>
                                <option>Installation</option>
                                <option>Maintenance</option>
                                <option>Repair</option>
                                <option>Inspection</option>
                                <option>Emergency</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fas fa-calendar"></i> Date *</label>
                            <input type="date" required class="modern-input">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-clock"></i> Time *</label>
                            <input type="time" required class="modern-input">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fas fa-user-hard-hat"></i> Assigned To *</label>
                            <select required class="modern-input">
                                <option value="">Select Technician</option>
                                <option>Mike Johnson</option>
                                <option>Sarah Williams</option>
                                <option>David Brown</option>
                                <option>Emily Davis</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-flag"></i> Priority *</label>
                            <select required class="modern-input">
                                <option value="low">üü¢ Low</option>
                                <option value="medium" selected>üü° Medium</option>
                                <option value="high">üî¥ High</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label><i class="fas fa-align-left"></i> Description</label>
                        <textarea rows="4" placeholder="Enter appointment details..." class="modern-input"></textarea>
                    </div>

                    <div class="form-group">
                        <label><i class="fas fa-tools"></i> Equipment Needed</label>
                        <input type="text" placeholder="e.g., HVAC Unit, Tools, Safety Gear" class="modern-input">
                    </div>

                    <div class="form-actions-enhanced">
                        <button type="button" class="btn btn-outline" onclick="closeModal('newAppointmentModal')">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check"></i> Create Appointment
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- New Work Order Modal (Enhanced) -->
    <div id="newWorkOrderModal" class="modal-enhanced">
        <div class="modal-content-enhanced modal-large">
            <div class="modal-header-enhanced">
                <h2><i class="fas fa-file-plus"></i> New Work Order</h2>
                <button class="modal-close-btn" onclick="closeModal('newWorkOrderModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body-enhanced">
                <form id="newWorkOrderForm" class="modern-form">
                    <div class="form-group">
                        <label><i class="fas fa-heading"></i> Work Order Title *</label>
                        <input type="text" required placeholder="Enter work order title" class="modern-input">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fas fa-building"></i> Client *</label>
                            <select required class="modern-input">
                                <option value="">Select Client</option>
                                <option>Acme Corporation</option>
                                <option>TechStart Inc.</option>
                                <option>Global Solutions Ltd.</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-wrench"></i> Work Type *</label>
                            <select required class="modern-input">
                                <option value="">Select Work Type</option>
                                <option>Installation</option>
                                <option>Repair</option>
                                <option>Maintenance</option>
                                <option>Inspection</option>
                                <option>Emergency</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label><i class="fas fa-align-left"></i> Description *</label>
                        <textarea rows="5" required placeholder="Describe the work to be done..." class="modern-input"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="fas fa-calendar"></i> Scheduled Date</label>
                            <input type="date" class="modern-input">
                        </div>
                        <div class="form-group">
                            <label><i class="fas fa-hourglass-half"></i> Estimated Hours</label>
                            <input type="number" placeholder="Hours" class="modern-input">
                        </div>
                    </div>

                    <div class="form-actions-enhanced">
                        <button type="button" class="btn btn-outline" onclick="closeModal('newWorkOrderModal')">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check"></i> Create Work Order
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container">
        <button class="fab" onclick="toggleFabMenu()">
            <i class="fas fa-plus"></i>
        </button>
        <div class="fab-menu" id="fabMenu">
            <button class="fab-item" onclick="openModal('newAppointmentModal')">
                <i class="fas fa-calendar-plus"></i>
                <span>New Appointment</span>
            </button>
            <button class="fab-item" onclick="openModal('newWorkOrderModal')">
                <i class="fas fa-file-alt"></i>
                <span>New Work Order</span>
            </button>
            <button class="fab-item" onclick="startTimeTracking()">
                <i class="fas fa-clock"></i>
                <span>Time Tracking</span>
            </button>
            <button class="fab-item" onclick="openModal('photoUploadModal')">
                <i class="fas fa-camera"></i>
                <span>Upload Photos</span>
            </button>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
